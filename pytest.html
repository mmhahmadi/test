<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Physics Antigravity Lab</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: #0f0c29;
            background: linear-gradient(to bottom, #24243e, #302b63, #0f0c29);
            font-family: 'Segoe UI', sans-serif;
        }
        #ui-layer {
            position: absolute;
            top: 20px;
            left: 20px;
            pointer-events: none;
            color: white;
            z-index: 10;
        }
        .instruction {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 20px;
            border-radius: 20px;
            backdrop-filter: blur(5px);
        }
    </style>
</head>
<body>

    <div id="ui-layer">
        <div class="instruction">
            <b>Physics Lab:</b> Ziehe die Boxen mit der Maus oder dem Finger!<br>
            Elemente reagieren auf Schwerkraft und Kollision.
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>

    <script>
        // 1. Module von Matter.js initialisieren
        const { Engine, Render, Runner, Bodies, Composite, Mouse, MouseConstraint } = Matter;

        // 2. Engine & Welt erstellen
        const engine = Engine.create();
        const world = engine.world;

        // 3. Renderer (Anzeige) erstellen
        const render = Render.create({
            element: document.body,
            engine: engine,
            options: {
                width: window.innerWidth,
                height: window.innerHeight,
                wireframes: false, // Setze auf true, um nur Linien zu sehen
                background: 'transparent'
            }
        });

        Render.run(render);
        Runner.run(Runner.create(), engine);

        // 4. Grenzen (Boden und Wände) erstellen, damit nichts aus dem Bild fällt
        const ground = Bodies.rectangle(window.innerWidth/2, window.innerHeight + 30, window.innerWidth, 60, { isStatic: true });
        const leftWall = Bodies.rectangle(-30, window.innerHeight/2, 60, window.innerHeight, { isStatic: true });
        const rightWall = Bodies.rectangle(window.innerWidth + 30, window.innerHeight/2, 60, window.innerHeight, { isStatic: true });
        const roof = Bodies.rectangle(window.innerWidth/2, -30, window.innerWidth, 60, { isStatic: true });

        Composite.add(world, [ground, leftWall, rightWall, roof]);

        // 5. Funktion um bunte Objekte zu erstellen
        function createBox(x, y) {
            const colors = ['#00f2ff', '#ff0055', '#72ff00', '#fbff00', '#ff00f2'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            
            return Bodies.rectangle(x, y, 80, 80, {
                restitution: 0.8, // Wie stark es abprallt (0 bis 1)
                friction: 0.1,
                render: {
                    fillStyle: randomColor,
                    strokeStyle: 'white',
                    lineWidth: 2
                }
            });
        }

        // Ein paar Start-Objekte reinwerfen
        for (let i = 0; i < 15; i++) {
            Composite.add(world, createBox(Math.random() * window.innerWidth, -500 * Math.random()));
        }

        // 6. Interaktion: Maus und Touch Steuerung hinzufügen
        const mouse = Mouse.create(render.canvas);
        const mouseConstraint = MouseConstraint.create(engine, {
            mouse: mouse,
            constraint: {
                stiffness: 0.2,
                render: { visible: false }
            }
        });

        Composite.add(world, mouseConstraint);

        // 7. Fenster-Größe anpassen
        window.addEventListener('resize', () => {
            render.canvas.width = window.innerWidth;
            render.canvas.height = window.innerHeight;
            // Hier müssten normalerweise die Wände neu positioniert werden
        });

    </script>
</body>
</html>